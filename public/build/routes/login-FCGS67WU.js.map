{
  "version": 3,
  "sources": ["../../../app/routes/login.tsx"],
  "sourcesContent": ["import { ActionFunction, json, LoaderFunction } from \"@remix-run/node\";\nimport { Form, useLoaderData } from \"@remix-run/react\";\nimport authenticator from \"~/services/auth.server\";\nimport { sessionStorage } from \"~/session.server\";\n\nexport const loader: LoaderFunction = async ({request}) => {\n  await authenticator.isAuthenticated(request, {\n    successRedirect: \"/admin\"\n  });\n\n  const session = await sessionStorage.getSession(request.headers.get(\"Cookie\"));\n\n  const error = session.get(\"sessionErrorKey\");\n  return json<any>({error});\n};\n\nexport const action: ActionFunction = async({request, context}) => {\n  const resp = await authenticator.authenticate(\"form\", request, {\n    successRedirect: \"/admin\",\n    failureRedirect: \"/login\",\n    throwOnError: true,\n    context\n  });\n  console.log(resp);\n  return resp;\n}\n\nexport default function LoginPage() {\n  const loaderData = useLoaderData();\n  console.log(loaderData);\n  return(\n    <div>\n      <h1>Log in to continue</h1>\n      <Form method=\"post\">  \n      <input type=\"email\" name=\"email\" placeholder=\"email\" required />\n      <input type=\"password\" name=\"password\" placeholder=\"password\" autoComplete=\"current-password\" />\n      <button>Sign In </button>\n      </Form>\n      <div>\n        {loaderData?.error ? <p>ERROR: {loaderData?.error?.message}</p>: null}\n      </div>\n    </div>\n  )\n\n\n}"],
  "mappings": ";;;;;;;;;;;;;;;;AAEA,kBAA0B;AAC1B,qBAA+B;AAH/B;AA2Be,SAAR,YAA6B;AA3BpC;AA4BE,QAAM,aAAa,cAAc;AACjC,UAAQ,IAAI,UAAU;AACtB,SACE,mDAAC;AAAA,IACC;AAAA,yDAAC;AAAA,QAAG;AAAA,SAAJ;AAAA;AAAA;AAAA;AAAA,aAAsB;AAAA,MACtB,mDAAC;AAAA,QAAK,QAAO;AAAA,QACb;AAAA,6DAAC;AAAA,YAAM,MAAK;AAAA,YAAQ,MAAK;AAAA,YAAQ,aAAY;AAAA,YAAQ,UAAQ;AAAA,aAA7D;AAAA;AAAA;AAAA;AAAA,iBAA8D;AAAA,UAC9D,mDAAC;AAAA,YAAM,MAAK;AAAA,YAAW,MAAK;AAAA,YAAW,aAAY;AAAA,YAAW,cAAa;AAAA,aAA3E;AAAA;AAAA;AAAA;AAAA,iBAA8F;AAAA,UAC9F,mDAAC;AAAA,YAAO;AAAA,aAAR;AAAA;AAAA;AAAA;AAAA,iBAAgB;AAAA;AAAA,SAHhB;AAAA;AAAA;AAAA;AAAA,aAIA;AAAA,MACA,mDAAC;AAAA,QACE,oDAAY,SAAQ,mDAAC;AAAA,UAAE;AAAA;AAAA,aAAQ,8CAAY,UAAZ,mBAAmB;AAAA;AAAA,WAA9B;AAAA;AAAA;AAAA;AAAA,eAAsC,IAAM;AAAA,SADnE;AAAA;AAAA;AAAA;AAAA,aAEA;AAAA;AAAA,KATF;AAAA;AAAA;AAAA;AAAA,SAUA;AAIJ;",
  "names": []
}
